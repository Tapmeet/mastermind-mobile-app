{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"E:\\\\Projects\\\\Mastermind-app\\\\Mastermind-App\\\\Mastermind\\\\src\\\\components\\\\screens\\\\Login.js\";\n\nimport React from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport { Container, Content, Form, Item, Input, Label, Button, Text, Body, H2, Icon } from \"native-base\";\nimport loginStyle from \"../../style/login/loginStyle\";\nimport globalStyle from \"../../style/globalStyle\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport LOGGED_IN_USER from \"./../../redux/User\";\n\nvar Login = function Login(props) {\n  var _React$useState = React.useState(\"\"),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      username = _React$useState2[0],\n      setUsername = _React$useState2[1];\n\n  var _React$useState3 = React.useState(\"\"),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      password = _React$useState4[0],\n      setPassword = _React$useState4[1];\n\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      checkUsername = _React$useState6[0],\n      setCheckUsername = _React$useState6[1];\n\n  var _React$useState7 = React.useState(false),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      checkPassword = _React$useState8[0],\n      setCheckPassword = _React$useState8[1];\n\n  var _React$useState9 = React.useState(''),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      errorMessage = _React$useState10[0],\n      setErrorMessage = _React$useState10[1];\n\n  var dispatch = useDispatch();\n\n  var userData = function userData(userInfo) {\n    return dispatch({\n      type: \"LOGGED_IN_USER\",\n      payload: userInfo\n    });\n  };\n\n  var ValidateEmail = function ValidateEmail(mail) {\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(mail);\n  };\n\n  var submitForm = function submitForm() {\n    if (username == \"\") {\n      setCheckUsername(true);\n      return false;\n    }\n\n    var checkemail = ValidateEmail(username);\n\n    if (checkemail == false) {\n      setCheckUsername(true);\n      return false;\n    }\n\n    if (password == \"\") {\n      setCheckPassword(true);\n      return false;\n    }\n\n    var details = {\n      userName: username,\n      password: password,\n      grant_type: \"password\"\n    };\n    var formBody = [];\n\n    for (var property in details) {\n      var encodedKey = encodeURIComponent(property);\n      var encodedValue = encodeURIComponent(details[property]);\n      formBody.push(encodedKey + \"=\" + encodedValue);\n    }\n\n    formBody = formBody.join(\"&\");\n    var apiUrl = \"http://192.168.18.22:45455/\".trim();\n    console.log(apiUrl);\n    fetch(apiUrl + \"/token\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded;charset=UTF-8\"\n      },\n      body: formBody\n    }).then(function (response) {\n      return response.json();\n    }).then(function (response) {\n      console.log(response);\n\n      if (response[\"access_token\"]) {\n        userData({\n          \"id\": 1,\n          \"access_Token\": response[\"access_token\"]\n        });\n      } else {\n        setErrorMessage(response[\"error_description\"]);\n      }\n    }).catch(function (data) {\n      console.log(\"Error\", data);\n    });\n  };\n\n  var setusername = function setusername(event) {\n    setUsername(event);\n\n    if (event == \"\") {\n      setCheckUsername(true);\n    } else {\n      setCheckUsername(false);\n    }\n  };\n\n  var setpassword = function setpassword(event) {\n    setPassword(event);\n\n    if (event == \"\") {\n      setCheckPassword(true);\n    } else {\n      setCheckPassword(false);\n    }\n  };\n\n  var navigation = props.navigation;\n  return React.createElement(Container, {\n    style: loginStyle.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }\n  }, React.createElement(Content, {\n    style: loginStyle.spacing,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, React.createElement(ImageBackground, {\n    style: {\n      width: \"100%\",\n      height: 200\n    },\n    source: require(\"./../../../assets/bg.png\"),\n    resizeMode: 'stretch',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: {\n      alignSelf: \"center\",\n      paddingTop: 40\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }, React.createElement(Image, {\n    style: loginStyle.logo,\n    source: require(\"../../../assets/Logo.png\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }))), React.createElement(Body, {\n    style: loginStyle.bodyContainer,\n    padder: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, React.createElement(H2, {\n    style: globalStyle.h2,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }, \"Welcome!\"), React.createElement(Text, {\n    style: globalStyle.small,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 11\n    }\n  }, \"Sign in to Continue\")), React.createElement(Form, {\n    style: globalStyle.form,\n    padder: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, React.createElement(Item, {\n    style: globalStyle.formGroup,\n    floatingLabel: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, React.createElement(Input, {\n    value: username,\n    onChangeText: function onChangeText(text) {\n      return setusername(text);\n    },\n    placeholderTextColor: \"#ccc\",\n    style: checkUsername ? globalStyle.formControlError : globalStyle.formControl,\n    placeholder: \"Enter Username\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  })), checkUsername ? React.createElement(Text, {\n    style: globalStyle.error,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, \"Enter Valid Username \") : null, React.createElement(Item, {\n    style: globalStyle.formGroup,\n    floatingLabel: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, React.createElement(Input, {\n    secureTextEntry: true,\n    value: password,\n    onChangeText: function onChangeText(text) {\n      return setpassword(text);\n    },\n    placeholderTextColor: \"#ccc\",\n    style: checkPassword ? globalStyle.formControlError : globalStyle.formControl,\n    placeholder: \"Password \",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  })), checkPassword ? React.createElement(Text, {\n    style: globalStyle.error,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, \"Enter Password\") : null, errorMessage != \"\" ? React.createElement(Text, {\n    style: [globalStyle.errorText, {\n      marginTop: 15\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }\n  }, errorMessage) : null, React.createElement(Content, {\n    style: loginStyle.formContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 11\n    }\n  }, React.createElement(Button, {\n    onPress: submitForm,\n    style: loginStyle.button,\n    full: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: loginStyle.buttonText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }, \"Login\")))), React.createElement(Body, {\n    style: globalStyle.textRight,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: globalStyle.hyperlink,\n    onPress: function onPress() {\n      return props.navigation.navigate(\"ForgetPassword\");\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  }, \"Forgot Password?\")), React.createElement(Body, {\n    style: loginStyle.signUpSection,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 11\n    }\n  }, \"Don\\u2019t have an account?\", React.createElement(Text, {\n    onPress: function onPress() {\n      return props.navigation.navigate(\"SignUp\");\n    },\n    style: globalStyle.hyperlink,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  }, \" \", \"Sign Up Now!\")))));\n};\n\nexport default Login;","map":{"version":3,"sources":["E:/Projects/Mastermind-app/Mastermind-App/Mastermind/src/components/screens/Login.js"],"names":["React","Container","Content","Form","Item","Input","Label","Button","Text","Body","H2","Icon","loginStyle","globalStyle","useSelector","useDispatch","LOGGED_IN_USER","Login","props","useState","username","setUsername","password","setPassword","checkUsername","setCheckUsername","checkPassword","setCheckPassword","errorMessage","setErrorMessage","dispatch","userData","userInfo","type","payload","ValidateEmail","mail","test","submitForm","checkemail","details","userName","grant_type","formBody","property","encodedKey","encodeURIComponent","encodedValue","push","join","apiUrl","trim","console","log","fetch","method","headers","body","then","response","json","catch","data","setusername","event","setpassword","navigation","container","spacing","width","height","require","alignSelf","paddingTop","logo","bodyContainer","h2","small","form","formGroup","text","formControlError","formControl","error","errorText","marginTop","formContainer","button","buttonText","textRight","hyperlink","navigate","signUpSection"],"mappings":"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","sourcesContent":["\r\nimport React from \"react\";\r\nimport { View, Image, StyleSheet, ImageBackground } from \"react-native\";\r\nimport { API_URL } from \"@env\"\r\nimport {\r\n  Container,\r\n  Content,\r\n  Form,\r\n  Item,\r\n  Input,\r\n  Label,\r\n  Button,\r\n  Text,\r\n  Body,\r\n  H2,\r\n  Icon,\r\n} from \"native-base\";\r\nimport loginStyle from \"../../style/login/loginStyle\";\r\nimport globalStyle from \"../../style/globalStyle\";\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport LOGGED_IN_USER from \"./../../redux/User\"\r\n\r\nconst Login = (props) => {\r\n  const [username, setUsername] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n  const [checkUsername, setCheckUsername] = React.useState(false);\r\n  const [checkPassword, setCheckPassword] = React.useState(false);\r\n  const [errorMessage, setErrorMessage] = React.useState('');\r\n  const dispatch = useDispatch()\r\n  const userData = userInfo => dispatch({ type: \"LOGGED_IN_USER\", payload: userInfo })\r\n  const ValidateEmail = (mail) => {\r\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(mail);\r\n  };\r\n\r\n  //Form Submission\r\n  const submitForm = () => {\r\n    if (username == \"\") {\r\n      setCheckUsername(true);\r\n      return false;\r\n    }\r\n    let checkemail = ValidateEmail(username);\r\n    if (checkemail == false) {\r\n      setCheckUsername(true);\r\n      return false;\r\n    }\r\n    if (password == \"\") {\r\n      setCheckPassword(true);\r\n      return false;\r\n    }\r\n    var details = {\r\n      userName: username,\r\n      password: password,\r\n      grant_type: \"password\",\r\n    };\r\n\r\n    var formBody = [];\r\n    for (var property in details) {\r\n      var encodedKey = encodeURIComponent(property);\r\n      var encodedValue = encodeURIComponent(details[property]);\r\n      formBody.push(encodedKey + \"=\" + encodedValue);\r\n    }\r\n    formBody = formBody.join(\"&\");\r\n    const apiUrl = API_URL.trim();\r\n    console.log(apiUrl)\r\n    fetch(`${apiUrl}/token`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/x-www-form-urlencoded;charset=UTF-8\",\r\n      },\r\n      body: formBody,\r\n    })\r\n      .then((response) => response.json())\r\n      .then((response) => {\r\n        console.log(response);\r\n        if (response[\"access_token\"]) {\r\n          userData({ \"id\": 1, \"access_Token\": response[\"access_token\"] })\r\n        }\r\n        else {\r\n          setErrorMessage(response[\"error_description\"] );\r\n        }\r\n\r\n      })\r\n      .catch(function (data) {\r\n        console.log(\"Error\", data);\r\n      });\r\n  };\r\n  const setusername = (event) => {\r\n    setUsername(event);\r\n    if (event == \"\") {\r\n      setCheckUsername(true);\r\n    } else {\r\n      setCheckUsername(false);\r\n    }\r\n  };\r\n  const setpassword = (event) => {\r\n    setPassword(event);\r\n    if (event == \"\") {\r\n      setCheckPassword(true);\r\n    } else {\r\n      setCheckPassword(false);\r\n    }\r\n  };\r\n\r\n  const { navigation } = props;\r\n  return (\r\n    <Container style={loginStyle.container}>\r\n      <Content style={loginStyle.spacing} >\r\n        <ImageBackground\r\n          style={{\r\n            width: \"100%\",\r\n            height: 200,\r\n          }}\r\n          source={require('./../../../assets/bg.png')}\r\n          resizeMode={'stretch'}\r\n        >\r\n          <View style={{\r\n            alignSelf: \"center\",\r\n            paddingTop: 40\r\n          }}>\r\n            <Image\r\n              style={loginStyle.logo}\r\n              source={require(\"../../../assets/Logo.png\")}\r\n            />\r\n          </View>\r\n        </ImageBackground>\r\n        <Body style={loginStyle.bodyContainer} padder>\r\n\r\n          <H2 style={globalStyle.h2}>Welcome!</H2>\r\n          <Text style={globalStyle.small}>Sign in to Continue</Text>\r\n        </Body>\r\n        <Form style={globalStyle.form} padder>\r\n          <Item style={globalStyle.formGroup} floatingLabel>\r\n            <Input\r\n              value={username}\r\n              onChangeText={(text) => setusername(text)}\r\n              placeholderTextColor='#ccc'\r\n              style={\r\n                checkUsername\r\n                  ? globalStyle.formControlError\r\n                  : globalStyle.formControl\r\n              }\r\n              placeholder=\"Enter Username\"\r\n            />\r\n          </Item>\r\n          {checkUsername ? (\r\n            <Text style={globalStyle.error}>Enter Valid Username </Text>\r\n          ) : null}\r\n          <Item style={globalStyle.formGroup} floatingLabel>\r\n            <Input\r\n              secureTextEntry={true}\r\n              value={password}\r\n              onChangeText={(text) => setpassword(text)}\r\n              placeholderTextColor='#ccc'\r\n              style={\r\n                checkPassword\r\n                  ? globalStyle.formControlError\r\n                  : globalStyle.formControl\r\n              }\r\n              placeholder=\"Password \"\r\n            />\r\n          </Item>\r\n          {checkPassword ? (\r\n            <Text style={globalStyle.error}>Enter Password</Text>\r\n          ) : null}\r\n          {errorMessage != \"\" ? (\r\n            <Text style={[globalStyle.errorText,{ marginTop:15}]}>{errorMessage}</Text>\r\n          ) : null}\r\n          <Content style={loginStyle.formContainer}>\r\n            <Button onPress={submitForm} style={loginStyle.button} full>\r\n              <Text style={loginStyle.buttonText} >Login</Text>\r\n            </Button>\r\n          </Content>\r\n        </Form>\r\n        <Body style={globalStyle.textRight}>\r\n          <Text\r\n            style={globalStyle.hyperlink}\r\n            onPress={() => props.navigation.navigate(\"ForgetPassword\")}\r\n          >\r\n            Forgot Password?\r\n          </Text>\r\n        </Body>\r\n\r\n        <Body style={loginStyle.signUpSection}>\r\n          <Text>\r\n            Don’t have an account?\r\n            <Text\r\n              onPress={() => props.navigation.navigate(\"SignUp\")}\r\n              style={globalStyle.hyperlink}\r\n            >\r\n              {\" \"}\r\n              Sign Up Now!\r\n            </Text>\r\n          </Text>\r\n        </Body>\r\n      </Content>\r\n    </Container>\r\n  );\r\n};\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}